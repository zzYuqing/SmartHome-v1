# 智能家居管理系统v1

## 0. 认证信息

### 0.1 登录认证

#### 0.1.1 认证方式说明

登录认证是通过用户的`userId`来进行的。当用户成功登录后，系统会发放一个包含`userId`的令牌。该令牌将用于之后所有需要认证的请求。

#### 0.1.2 令牌1使用示例

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

在这个示例中，令牌被包含在HTTP请求的`Authorization`头部中。这个令牌是在用户登录成功后由服务器端发放的。

### 0.2 房屋选择后的认证

#### 0.2.1 认证方式说明

当用户选择一个房屋进行管理之后，系统会发放一个新的令牌，这个令牌将包含`userId`和`homeId`。这确保了用户可以进行房屋相关的操作。

#### 0.2.2 令牌2使用示例

```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

令牌2不仅包含用户的`userId`，还包含了当前选择管理的`homeId`。这个令牌将被用于之后所有房屋管理相关的请求。

## 1. 账号管理

### 1.1 账号注册

#### 1.1.1 基本信息

> 请求路径：/register
>
> 请求方式：POST
>
> 接口描述：该接口用于新用户的账号注册。

#### 1.1.2 请求参数

| 参数名   | 类型   | 是否必须 | 备注     |
| -------- | ------ | -------- | -------- |
| username | string | 必须     | 用户名   |
| phone    | string | 必须     | 电话号码 |
| password | string | 必须     | 密码     |

#### 1.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                           |
| ------ | ------ | -------- | ------------------------------ |
| code   | number | 必须     | 响应码，1代表成功，0代表失败   |
| msg    | string | 必须     | 提示信息                       |
| data   | object | 非必须   | 用户注册后的信息（如用户ID等） |

------

### 1.2 账号登录

#### 1.2.1 基本信息

> 请求路径：/login
>
> 请求方式：POST
>
> 接口描述：该接口用于用户登录。

#### 1.2.2 请求参数

| 参数名   | 类型   | 是否必须 | 备注   |
| -------- | ------ | -------- | ------ |
| username | string | 必须     | 用户名 |
| password | string | 必须     | 密码   |

#### 1.2.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                           |
| ------ | ------ | -------- | ------------------------------ |
| code   | number | 必须     | 响应码，1代表成功，0代表失败   |
| msg    | string | 必须     | 提示信息                       |
| data   | object | 非必须   | 用户登录后的信息（如用户ID等） |



## 2. 房屋管理

### 2.1 查询用户管理的房屋数目

#### 2.1.1 基本信息

> 请求路径：/houseManage/getHouseCount
>
> 请求方式：GET
>
> 接口描述：该接口用于查询当前登录用户管理的房屋数目。

#### 2.1.2 请求参数

此接口可能不需要明确的请求参数，因为用户的身份应该已经在登录时通过会话或令牌进行了验证。但如果需要，可以添加如下参数：

| 参数名 | 类型   | 是否必须 | 备注   |
| ------ | ------ | -------- | ------ |
| userId | string | 必须     | 用户ID |

#### 2.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名     | 类型   | 是否必须 | 备注                         |
| ---------- | ------ | -------- | ---------------------------- |
| code       | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg        | string | 必须     | 提示信息                     |
| houseCount | number | 必须     | 用户管理的房屋数目           |

### 2.2 房屋修改

#### 2.2.1 添加房屋

> 请求路径：/houseManage/addHouse
>
> 请求方式：POST
>
> 接口描述：该接口用于添加新房屋或已有房屋到用户管理列表。

##### 请求参数

| 参数名  | 类型   | 是否必须 | 备注                                         |
| ------- | ------ | -------- | -------------------------------------------- |
| houseId | number | 必须     | 房屋编号，如果是新房屋，编号为0              |
| address | string | 可选     | 新房屋的地址，如果houseId为0，则此字段为必须 |

##### 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |

------

#### 2.2.2 删除房屋

> 请求路径：/houseManage/deleteHouse
>
> 请求方式：POST
>
> 接口描述：该接口用于删除用户管理的某个房屋。

##### 请求参数

| 参数名  | 类型   | 是否必须 | 备注     |
| ------- | ------ | -------- | -------- |
| houseId | number | 必须     | 房屋编号 |

##### 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |



## 3. 能源监测

### 3.1 获取当前能源使用数据

#### 3.1.1 基本信息

> 请求路径：/energyMonitor/currentUsage
>
> 请求方式：GET
>
> 接口描述：该接口用于获取当前能源使用情况的数据。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 3.1.2 请求参数

无需请求参数，因为数据可能会根据用户登录状态和权限显示。

#### 3.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名        | 类型   | 是否必须 | 备注                         |
| ------------- | ------ | -------- | ---------------------------- |
| code          | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg           | string | 必须     | 提示信息                     |
| data          | object | 必须     | 包含当前能源使用情况的数据   |
| └─electricity | number | 必须     | 当前电能使用量               |
| └─water       | number | 必须     | 当前水资源使用量             |
| └─gas         | number | 必须     | 当前燃气使用量               |
| └─internet    | number | 必须     | 当前互联网使用情况           |

------

### 3.2 获取能源使用历史数据

#### 3.2.1 基本信息

> 请求路径：/energyMonitor/historicalUsage
>
> 请求方式：GET
>
> 接口描述：该接口用于获取最近一个月的能源使用情况的历史数据，用于绘制折线图。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 3.2.2 请求参数

无需请求参数，因为数据可能会根据用户登录状态和权限显示。

#### 3.2.3 响应数据

参数格式：application/json

参数说明：

| 参数名        | 类型     | 是否必须 | 备注                             |
| ------------- | -------- | -------- | -------------------------------- |
| code          | number   | 必须     | 响应码，1代表成功，0代表失败     |
| msg           | string   | 必须     | 提示信息                         |
| data          | object[] | 必须     | 包含一段时间内能源使用情况的数组 |
| └─date        | string   | 必须     | 日期                             |
| └─electricity | number   | 必须     | 每日电能使用量                   |
| └─water       | number   | 必须     | 每日水资源使用量                 |
| └─gas         | number   | 必须     | 每日燃气使用量                   |
| └─internet    | number   | 必须     | 每日互联网使用情况               |



## 4. 健康管理

### 4.1 获取健康监测数据

#### 4.1.1 基本信息

> 请求路径：/healthMonitor/currentData
>
> 请求方式：GET
>
> 接口描述：该接口用于获取当前健康监测数据，包括空气质量、温度和湿度。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 4.1.2 请求参数

无需请求参数，因为数据可能会根据用户登录状态和权限显示。

#### 4.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名        | 类型   | 是否必须 | 备注                         |
| ------------- | ------ | -------- | ---------------------------- |
| code          | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg           | string | 必须     | 提示信息                     |
| data          | object | 必须     | 包含当前健康监测数据         |
| └─airQuality  | number | 必须     | 当前空气质量指数             |
| └─temperature | number | 必须     | 当前温度值                   |
| └─humidity    | number | 必须     | 当前湿度值                   |

------

### 4.2 获取健康监测历史数据

#### 4.2.1 基本信息

> 请求路径：/healthMonitor/historicalData
>
> 请求方式：GET
>
> 接口描述：该接口用于获取健康监测的历史数据，用于绘制折线图，包括空气质量、温度和湿度的历史数据。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 4.2.2 请求参数

无需请求参数，因为数据可能会根据用户登录状态和权限显示。

#### 4.2.3 响应数据

参数格式：application/json

参数说明：

| 参数名        | 类型     | 是否必须 | 备注                             |
| ------------- | -------- | -------- | -------------------------------- |
| code          | number   | 必须     | 响应码，1代表成功，0代表失败     |
| msg           | string   | 必须     | 提示信息                         |
| data          | object[] | 必须     | 包含一段时间内健康监测数据的数组 |
| └─date        | string   | 必须     | 日期                             |
| └─airQuality  | number   | 必须     | 每日空气质量指数                 |
| └─temperature | number   | 必须     | 每日温度值                       |
| └─humidity    | number   | 必须     | 每日湿度值                       |

## 5. 访客管理

### 5.1 今日访客

#### 5.1.1 获取今日访客列表

> 请求路径：/visitorManagement/todayVisitors
>
> 请求方式：GET
>
> 接口描述：该接口用于获取今日所有访客的列表。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 5.1.2 请求参数

无

#### 5.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名      | 类型     | 是否必须 | 备注     |
| ----------- | -------- | -------- | -------- |
| code        | number   | 必须     | 响应码   |
| msg         | string   | 必须     | 提示信息 |
| visitors    | object[] | 必须     | 访客列表 |
| └─visitorId | string   | 必须     | 访客ID   |
| └─time      | string   | 必须     | 来访时间 |
| └─trusted   | boolean  | 必须     | 是否信任 |

------

### 5.2 添加信任访客

#### 5.2.1 添加访客到信任列表

> 请求路径：/visitorManagement/addTrustedVisitor
>
> 请求方式：POST
>
> 接口描述：该接口用于将特定访客添加到信任列表中。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 5.2.2 请求参数

| 参数名    | 类型   | 是否必须 | 备注           |
| --------- | ------ | -------- | -------------- |
| visitorId | string | 必须     | 要信任的访客ID |

#### 5.2.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |

### 5.3 删除信任访客

#### 5.3.1 从信任列表删除信任访客

> 请求路径（删除）：/visitorManagement/trustedVisitors/{visitorId}
>
> 请求方式（删除）：DELETE
>
> 接口描述：这些接口用于从信任列表中删除访客。
>
> 认证：是（需要在请求头部包含`Authorization`字段和令牌2）

#### 5.3.2 请求参数

在路径中直接指定要删除的访客ID。

------

#### 5.3.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |



## 6. 家电管理

### 6.1 获取设备大类列表

#### 6.1.1 基本信息

> 请求路径：/api/appliances/categories
>
> 请求方式：GET
>
> 接口描述：提供所有家电的大类。

#### 6.1.2 请求参数

无

#### 6.1.3 响应数据

参数格式：application/json

参数说明：

| 参数名     | 类型   | 是否必须 | 备注                   |
| ---------- | ------ | -------- | ---------------------- |
| code       | number | 必须     | 响应码                 |
| msg        | string | 必须     | 提示信息               |
| categories | array  | 必须     | 家电大类名称的数组列表 |

------

### 6.2 获取设备小类列表

#### 6.2.1 基本信息

> 请求路径：/api/appliances/subcategories
>
> 请求方式：GET
>
> 接口描述：根据选定的家电大类，提供该大类所有小类设备的列表。

#### 6.2.2 请求参数

| 参数名   | 类型   | 是否必须 | 备注         |
| -------- | ------ | -------- | ------------ |
| category | string | 必须     | 家电大类名称 |

#### 6.2.3 响应数据

参数格式：application/json

参数说明：

| 参数名        | 类型   | 是否必须 | 备注                   |
| ------------- | ------ | -------- | ---------------------- |
| code          | number | 必须     | 响应码                 |
| msg           | string | 必须     | 提示信息               |
| subcategories | array  | 必须     | 家电小类名称的数组列表 |

------

### 6.3 获取特定小类的详细信息

#### 6.3.1 基本信息

> 请求路径：/api/appliances/details
>
> 请求方式：GET
>
> 接口描述：展示选定小类的所有设备的详细信息。

#### 6.3.2 请求参数

| 参数名      | 类型   | 是否必须 | 备注         |
| ----------- | ------ | -------- | ------------ |
| subcategory | string | 必须     | 设备小类名称 |

#### 6.3.3 响应数据

参数格式：application/json

参数说明：

| 参数名          | 类型     | 是否必须 | 备注         |
| --------------- | -------- | -------- | ------------ |
| code            | number   | 必须     | 响应码       |
| msg             | string   | 必须     | 提示信息     |
| appliances      | object[] | 必须     | 设备列表     |
| └─name          | string   | 必须     | 产品名称     |
| └─mode          | string   | 必须     | 智能模式     |
| └─purchase_date | string   | 必须     | 购买日期     |
| └─warranty_date | string   | 必须     | 保修日期     |
| └─vendor        | string   | 必须     | 商家         |
| └─service       | string   | 必须     | 售后服务信息 |

------

### 6.4 添加新设备的接口

#### 6.4.1 基本信息

> 请求路径：/api/appliances/add
>
> 请求方式：POST
>
> 接口描述：允许用户输入新设备的信息并添加到系统。

#### 6.4.2 请求参数

| 参数名        | 类型   | 是否必须 | 备注         |
| ------------- | ------ | -------- | ------------ |
| name          | string | 必须     | 设备名称     |
| subcategory   | string | 必须     | 设备小类     |
| purchase_date | string | 必须     | 购买日期     |
| warranty_date | string | 必须     | 保修日期     |
| vendor        | string | 必须     | 商家         |
| service       | string | 必须     | 售后服务信息 |

#### 6.4.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |

------

### 6.5 删除设备的接口

#### 6.5.1 基本信息

> 请求路径：/api/appliances/remove
>
> 请求方式：DELETE
>
> 接口描述：允许用户从系统中移除不再需要管理的设备。

#### 6.5.2 请求参数

| 参数名 | 类型   | 是否必须 | 备注     |
| ------ | ------ | -------- | -------- |
| name   | string | 必须     | 设备名称 |

#### 6.5.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注                         |
| ------ | ------ | -------- | ---------------------------- |
| code   | number | 必须     | 响应码，1代表成功，0代表失败 |
| msg    | string | 必须     | 提示信息                     |

### 6.6 查询小类型可选模式

#### 6.6.1基本信息

> 请求路径：/api/appliances/modes
>
> 请求方式：GET
>
> 接口描述：根据当前设备的小类型，查询并返回该小类型可选的所有智能模式。

#### 6.6.2 请求参数

| 参数名      | 类型   | 是否必须 | 备注         |
| ----------- | ------ | -------- | ------------ |
| subcategory | string | 必须     | 设备小类名称 |

#### 6.6.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型     | 是否必须 | 备注         |
| ------ | -------- | -------- | ------------ |
| code   | number   | 必须     | 响应码       |
| msg    | string   | 必须     | 提示信息     |
| modes  | string[] | 必须     | 可选模式列表 |

### 6.7 修改设备模式

#### 6.7.1 基本信息

> 请求路径：/api/appliances/update-mode
>
> 请求方式：POST
>
> 接口描述：允许用户为特定设备选择并设置新的模式。

#### 6.7.2 请求参数

| 参数名   | 类型   | 是否必须 | 备注       |
| -------- | ------ | -------- | ---------- |
| deviceId | string | 必须     | 设备ID     |
| mode     | string | 必须     | 选定的模式 |

#### 6.7.3 响应数据

参数格式：application/json

参数说明：

| 参数名 | 类型   | 是否必须 | 备注     |
| ------ | ------ | -------- | -------- |
| code   | number | 必须     | 响应码   |
| msg    | string | 必须     | 提示信息 |
